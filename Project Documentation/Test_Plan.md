# Тестовий план для системи управління бібліотекою (LibraryCatalogManager)

## Аналіз системи та визначення потенційних точок відмов

### Потенційні точки відмов при високих навантаженнях:

1. **База даних:**
   - **Точка відмов:** Високе навантаження на базу даних (наприклад, під час одночасного запиту на видачу книг).
   - **Умови для відмови:**
     - Блокування транзакцій через великий обсяг даних.
     - Вичерпання з'єднань у пулі.
     - Проблеми з таймаутом через перевантаження бази даних.
   - **Наслідки:** Неможливість завершення транзакцій, затримки при збереженні даних.

2. **Система транзакцій (видача/повернення книг):**
   - **Точка відмов:** Високі обсяги одночасних операцій можуть призвести до конфліктів транзакцій.
   - **Умови для відмови:**
     - Неправильне завершення транзакцій через великі черги.
     - Невдала обробка через перевантаження бази даних.
   - **Наслідки:** Невірні оновлення балансу книг, збої під час видачі/повернення книг.

3. **Зовнішні API (отримання інформації про книги):**
   - **Точка відмов:** Високе навантаження на зовнішні API для отримання даних.
   - **Умови для відмови:**
     - Перевищення лімітів запитів до API.
     - Довгі часи відповіді від API через перевантаження.
   - **Наслідки:** Неправильна інформація про доступність книг, затримки в обробці запитів.

4. **Пул з'єднань та HTTP запити:**
   - **Точка відмов:** Велика кількість одночасних запитів може виснажити пул з'єднань.
   - **Умови для відмови:**
     - Перевищення кількості одночасних з'єднань.
     - Вичерпання ресурсів сервера (CPU, пам'ять).
   - **Наслідки:** Неможливість обробки нових запитів, уповільнення системи.

5. **Мережева інфраструктура:**
   - **Точка відмов:** Перевантаження сервера або мережі через велику кількість запитів.
   - **Умови для відмови:**
     - Перевищення пропускної здатності мережі.
     - Вимкнення сервера через брак ресурсів.
   - **Наслідки:** Проблеми з доступом до системи, збої в обслуговуванні користувачів.

## План тестування системи під навантаженням

1. **Тестування навантаження:**
   - **Мета:** Перевірити, як система поводиться під навантаженням.
   - **Тест:**
     - Використання інструментів, таких як Apache JMeter або Locust, для моделювання великої кількості запитів.
   - **Очікувані результати:** Система повинна підтримувати певну кількість одночасних користувачів без значних збоїв.

2. **Стрес-тестування:**
   - **Мета:** Перевірити, як система витримує екстремальні умови.
   - **Тест:**
     - Поступове збільшення кількості запитів до системи та спостереження за моментом, коли вона почне давати збій.
   - **Очікувані результати:** Визначити точку, при якій система почне збій (збільшення затримки, крах).

3. **Тестування пулу з'єднань:**
   - **Мета:** Перевірити, як система управляє пулами з'єднань.
   - **Тест:**
     - Створити навантаження, яке вимагатиме одночасного доступу до бази даних.
   - **Очікувані результати:** Система повинна ефективно управляти пулом з'єднань без збоїв.

4. **Тестування на відмову зовнішніх API:**
   - **Мета:** Перевірити стійкість системи при відмові зовнішніх API.
   - **Тест:**
     - Симулювати недоступність або повільну відповідь зовнішніх API.
   - **Очікувані результати:** Система повинна обробляти відмови API, повідомляючи користувача про помилки без зависання.

## Документація тестових протоколів

### Приклад тестового протоколу:

| Тест                        | Опис                                              | Очікуваний результат                                        | Результат      |
|-----------------------------|---------------------------------------------------|------------------------------------------------------------|-----------------|
| Тест навантаження транзакцій | Одночасне виконання 200 запитів на забронювання книг | Система обробляє всі запити без збоїв, мінімальні затримки | Успіх / Збій   |
| Стрес-тест бази даних       | Збільшення кількості одночасних запитів до 1000  | Час обробки запитів не перевищує очікуваний поріг         | Успіх / Збій   |
| Симуляція відмови API       | Симуляція затримок або недоступності API         | Система обробляє помилки API без зависання                 | Успіх / Збій   |

### Пояснення рішень:
- Якщо система не може обробити запити в межах визначеного часу (наприклад, більше 2 секунд), необхідно оптимізувати обробку бази даних або пул з'єднань.
- У разі відмови зовнішніх API система повинна або повертатися до кешованих даних, або повідомляти користувача про тимчасову недоступність цін.

## Висновок

Дотримуючись цього плану, ми зможемо оцінити стабільність системи під умовами високих навантажень і забезпечити її стійкість при обслуговуванні багатьох користувачів одночасно.
